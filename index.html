<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptCraft - æç¤ºè¯ç”Ÿæˆå™¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #fafafa;
            --card: #ffffff;
            --border: #e5e5e5;
            --text: #1a1a1a;
            --text-secondary: #666666;
            --text-muted: #999999;
            --accent: #000000;
            --accent-light: #f5f5f5;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 3rem;
        }

        header h1 {
            font-size: 1.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        header p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Scene Selector */
        .scene-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 2.5rem;
        }

        .scene-btn {
            padding: 0.5rem 1rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 100px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .scene-btn:hover {
            border-color: var(--accent);
        }

        .scene-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* Builder */
        .builder {
            background: var(--card);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .step {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .step:last-child {
            border-bottom: none;
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .step-number {
            width: 24px;
            height: 24px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .step-title {
            font-weight: 500;
            font-size: 0.95rem;
        }

        .step-optional {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-left: auto;
        }

        .step-hint {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
        }

        textarea,
        input[type="text"] {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.9rem;
            resize: vertical;
            transition: border-color 0.2s;
        }

        textarea:focus,
        input:focus {
            outline: none;
            border-color: var(--accent);
        }

        textarea {
            min-height: 80px;
        }

        /* Templates */
        .templates-bar {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            background: var(--accent-light);
        }

        .template-chip {
            padding: 0.375rem 0.875rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .template-chip:hover {
            border-color: var(--accent);
        }

        /* Preview */
        .preview-section {
            margin-top: 2rem;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .preview-header h2 {
            font-size: 1rem;
            font-weight: 500;
        }

        .preview-box {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            min-height: 150px;
            font-family: 'Menlo', monospace;
            font-size: 0.85rem;
            line-height: 1.8;
            white-space: pre-wrap;
            color: var(--text-secondary);
        }

        .copy-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
            transition: opacity 0.2s;
        }

        .copy-btn:hover {
            opacity: 0.9;
        }

        .copy-btn.copied {
            background: #22c55e;
        }

        .enhance-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            margin-top: 1rem;
            transition: all 0.3s;
        }

        .enhance-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .enhance-btn.enhanced {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        /* Tips */
        .tips {
            margin-top: 2rem;
            padding: 1rem 1.25rem;
            background: var(--accent-light);
            border-radius: 8px;
        }

        .tips-title {
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .tips-content {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 3rem 1rem 2rem;
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        footer a {
            color: var(--text-secondary);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .author {
            margin-bottom: 0.5rem;
        }

        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }

            .step {
                padding: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>PromptCraft</h1>
            <p>åŸºäº Google æç¤ºè¯å·¥ç¨‹æŒ‡å— Â· å°ç™½ä¹Ÿèƒ½å†™å‡ºä¸“ä¸šæç¤ºè¯</p>
        </header>

        <!-- Scene Selector -->
        <div class="scene-grid" id="sceneGrid">
            <button class="scene-btn active" data-scene="writing">ğŸ“ å†™ä½œ</button>
            <button class="scene-btn" data-scene="problem">ğŸ’¡ é—®é¢˜è§£å†³</button>
            <button class="scene-btn" data-scene="analysis">ğŸ“Š æ•°æ®åˆ†æ</button>
            <button class="scene-btn" data-scene="creative">ğŸ¨ åˆ›æ„</button>
            <button class="scene-btn" data-scene="extract">ğŸ” ä¿¡æ¯æå–</button>
            <button class="scene-btn" data-scene="assistant">ğŸ’¬ å¯¹è¯åŠ©æ‰‹</button>
        </div>

        <!-- Builder -->
        <div class="builder">
            <!-- Templates Bar -->
            <div class="templates-bar">
                <span style="font-size: 0.8rem; color: var(--text-muted); margin-right: 0.5rem;">å¿«é€Ÿæ¨¡æ¿ï¼š</span>
                <span class="template-chip" onclick="loadTemplate('xiaohongshu')">å°çº¢ä¹¦ç¬”è®°</span>
                <span class="template-chip" onclick="loadTemplate('article')">æ–‡ç« æ’°å†™</span>
                <span class="template-chip" onclick="loadTemplate('code')">ä»£ç åŠ©æ‰‹</span>
                <span class="template-chip" onclick="loadTemplate('translate')">ç¿»è¯‘æ¶¦è‰²</span>
                <span class="template-chip" onclick="loadTemplate('summary')">å†…å®¹æ€»ç»“</span>
            </div>

            <!-- Step 1 -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <div class="step-title">è§’è‰²è®¾å®š</div>
                </div>
                <div class="step-hint">ç»™ AI ä¸€ä¸ªæ˜ç¡®çš„èº«ä»½ï¼Œå®ƒä¼šæ›´å¥½åœ°ç†è§£ä½ çš„æœŸæœ›</div>
                <textarea id="roleInput" placeholder="ä¾‹å¦‚ï¼šä½ æ˜¯ä¸€ä½èµ„æ·±çš„æ–‡æ¡ˆç­–åˆ’ä¸“å®¶ï¼Œæ“…é•¿æ’°å†™å¸å¼•çœ¼çƒçš„ç¤¾äº¤åª’ä½“å†…å®¹..."
                    oninput="updatePreview()"></textarea>
            </div>

            <!-- Step 2 -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <div class="step-title">èƒŒæ™¯ä¿¡æ¯</div>
                    <div class="step-optional">å¯é€‰</div>
                </div>
                <div class="step-hint">æä¾›ç›¸å…³èƒŒæ™¯ï¼Œè®© AI æ›´å‡†ç¡®ç†è§£ä»»åŠ¡æƒ…å¢ƒ</div>
                <textarea id="contextInput" placeholder="ä¾‹å¦‚ï¼šç›®æ ‡ç”¨æˆ·æ˜¯25-35å²çš„éƒ½å¸‚ç™½é¢†å¥³æ€§..." oninput="updatePreview()"></textarea>
            </div>

            <!-- Step 3 -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <div class="step-title">ä»»åŠ¡æŒ‡ä»¤</div>
                </div>
                <div class="step-hint">æ¸…æ™°å…·ä½“åœ°æè¿°ä½ éœ€è¦ AI å®Œæˆçš„ä»»åŠ¡</div>
                <textarea id="taskInput" placeholder="ä¾‹å¦‚ï¼šè¯·å¸®æˆ‘æ’°å†™3æ¡å°çº¢ä¹¦ç¬”è®°æ ‡é¢˜å’Œå¼€å¤´ï¼Œä¸»é¢˜æ˜¯'å¤æ—¥å‡è„‚'..."
                    oninput="updatePreview()"></textarea>
            </div>

            <!-- Step 4 -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number">4</div>
                    <div class="step-title">è¾“å‡ºæ ¼å¼</div>
                    <div class="step-optional">å¯é€‰</div>
                </div>
                <div class="step-hint">æŒ‡å®šè¾“å‡ºçš„ç»“æ„å’Œæ ¼å¼ï¼Œè·å¾—æ›´è§„èŒƒçš„å›å¤</div>
                <textarea id="formatInput" placeholder="ä¾‹å¦‚ï¼šè¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼š&#10;1. ã€æ ‡é¢˜ã€‘&#10;2. ã€æ­£æ–‡ã€‘&#10;3. ã€è¯é¢˜æ ‡ç­¾ã€‘"
                    oninput="updatePreview()"></textarea>
            </div>

            <!-- Step 5 -->
            <div class="step">
                <div class="step-header">
                    <div class="step-number">5</div>
                    <div class="step-title">çº¦æŸæ¡ä»¶</div>
                    <div class="step-optional">å¯é€‰</div>
                </div>
                <div class="step-hint">æ·»åŠ é™åˆ¶æ¡ä»¶ï¼Œç¡®ä¿è¾“å‡ºç¬¦åˆä½ çš„è¦æ±‚</div>
                <textarea id="constraintInput" placeholder="ä¾‹å¦‚ï¼š&#10;- ä¸è¦ä½¿ç”¨è¿‡äºæ­£å¼çš„è¯­è¨€&#10;- æ¯æ¡å†…å®¹ä¸è¶…è¿‡300å­—"
                    oninput="updatePreview()"></textarea>
            </div>
        </div>

        <!-- Preview -->
        <div class="preview-section">
            <div class="preview-header">
                <h2>é¢„è§ˆ</h2>
            </div>
            <div class="preview-box" id="previewBox">åœ¨ä¸Šæ–¹å¡«å†™å†…å®¹ï¼Œè¿™é‡Œä¼šå®æ—¶æ˜¾ç¤ºä½ çš„æç¤ºè¯...</div>
            <button class="enhance-btn" onclick="enhancePrompt()">âœ¨ ä¸€é”®å¢å¼ºæç¤ºè¯</button>
            <button class="copy-btn" onclick="copyPrompt()">ğŸ“‹ å¤åˆ¶æç¤ºè¯</button>
        </div>

        <!-- Tips -->
        <div class="tips" id="tipsPanel">
            <div class="tips-title">ğŸ’¡ æŠ€å·§æç¤º</div>
            <div class="tips-content" id="tipsContent">ä½¿ç”¨å…·ä½“ã€æ˜ç¡®çš„æŒ‡ä»¤ï¼Œè€Œéæ¨¡ç³Šçš„æè¿°ã€‚ä¾‹å¦‚"å†™ä¸€æ®µ100å­—çš„äº§å“ä»‹ç»"æ¯”"å†™ä¸ªäº§å“ä»‹ç»"æ›´å¥½ã€‚</div>
        </div>
    </div>

    <footer>
        <div class="author">Made with â¤ï¸ by <a href="https://github.com/xuanxuan-ai" target="_blank">è±è±</a></div>
        <div>åŸºäº <a href="https://cloud.google.com/vertex-ai/docs/generative-ai/learn/prompt-engineering"
                target="_blank">Google Prompt Engineering ç™½çš®ä¹¦</a></div>
    </footer>

    <script>
        const templates = {
            xiaohongshu: {
                role: 'ä½ æ˜¯ä¸€ä½å°çº¢ä¹¦çˆ†æ¬¾å†…å®¹åˆ›ä½œä¸“å®¶ï¼Œç†Ÿæ‚‰å¹³å°ç®—æ³•å’Œç”¨æˆ·å–œå¥½ã€‚',
                context: 'ç›®æ ‡ç”¨æˆ·ï¼š18-35å²å¹´è½»ç”¨æˆ·',
                task: 'è¯·ä¸ºä»¥ä¸‹ä¸»é¢˜åˆ›ä½œ3æ¡å°çº¢ä¹¦ç¬”è®°ï¼Œæ¯æ¡åŒ…å«æ ‡é¢˜ã€æ­£æ–‡å¼€å¤´å’Œè¯é¢˜æ ‡ç­¾ã€‚',
                format: 'æ¯æ¡ç¬”è®°æ ¼å¼ï¼š\nğŸ“Œ ã€æ ‡é¢˜ã€‘\nâœï¸ ã€å¼€å¤´ã€‘30-50å­—\n#ï¸âƒ£ ã€è¯é¢˜ã€‘3-5ä¸ª',
                constraint: '- ä½¿ç”¨å£è¯­åŒ–ã€äº²åˆ‡çš„è¯­æ°”\n- æ ‡é¢˜å¿…é¡»åŒ…å«æ•°å­—æˆ–é—®å¥'
            },
            article: {
                role: 'ä½ æ˜¯ä¸€ä½èµ„æ·±å†…å®¹ç­–åˆ’å¸ˆï¼Œæ“…é•¿æ’°å†™æ·±åº¦é•¿æ–‡ï¼Œç»“æ„æ¸…æ™°ã€å¯è¯»æ€§å¼ºã€‚',
                context: '',
                task: 'è¯·ä¸ºä»¥ä¸‹ä¸»é¢˜æ’°å†™ä¸€ç¯‡ç»“æ„å®Œæ•´çš„æ–‡ç« ã€‚',
                format: '1. ã€å¼€å¤´ã€‘æŠ›å‡ºç—›ç‚¹æˆ–æ•…äº‹\n2. ã€æ­£æ–‡ã€‘åˆ†3-5ä¸ªå°æ ‡é¢˜\n3. ã€ç»“å°¾ã€‘æ€»ç»“+è¡ŒåŠ¨å»ºè®®',
                constraint: 'æ¯æ®µä¸è¶…è¿‡150å­—ï¼Œä½¿ç”¨å…·ä½“æ¡ˆä¾‹æ”¯æŒè§‚ç‚¹'
            },
            code: {
                role: 'ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œå–„äºå†™å‡ºæ¸…æ™°ã€é«˜æ•ˆçš„ä»£ç ã€‚',
                context: '',
                task: 'è¯·å¸®æˆ‘å®Œæˆä»¥ä¸‹ç¼–ç¨‹ä»»åŠ¡ï¼Œå¹¶é™„ä¸Šè¯¦ç»†æ³¨é‡Šã€‚',
                format: '1. è§£é¢˜æ€è·¯\n2. å®Œæ•´ä»£ç ï¼ˆå¸¦æ³¨é‡Šï¼‰\n3. å¤æ‚åº¦åˆ†æ',
                constraint: 'ä»£ç å¿…é¡»å¯ç›´æ¥è¿è¡Œï¼Œè€ƒè™‘è¾¹ç•Œæƒ…å†µ'
            },
            translate: {
                role: 'ä½ æ˜¯ä¸€ä½ä¸“ä¸šç¿»è¯‘ï¼Œç²¾é€šä¸­è‹±åŒè¯­ï¼Œæ“…é•¿ä¿¡è¾¾é›…çš„ç¿»è¯‘ã€‚',
                context: '',
                task: 'è¯·å°†ä»¥ä¸‹å†…å®¹ç¿»è¯‘ï¼Œä¿æŒåŸæ–‡é£æ ¼å’Œè¯­æ°”ã€‚',
                format: 'ã€è¯‘æ–‡ã€‘ç¿»è¯‘å†…å®¹\nã€è¯´æ˜ã€‘å…³é”®è¯æ±‡é€‰æ‹©è¯´æ˜',
                constraint: 'ä¿æŒåŸæ–‡è¯­æ°”ï¼Œä¸“ä¸šæœ¯è¯­éœ€å‡†ç¡®'
            },
            summary: {
                role: 'ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å†…å®¹åˆ†æå¸ˆï¼Œå–„äºå¿«é€Ÿæå–æ–‡ç« æ ¸å¿ƒè¦ç‚¹ã€‚',
                context: '',
                task: 'è¯·é˜…è¯»ä»¥ä¸‹å†…å®¹ï¼Œç”Ÿæˆç»“æ„åŒ–æ‘˜è¦ã€‚',
                format: 'ğŸ“Œ ã€ä¸€å¥è¯æ¦‚è¿°ã€‘\nğŸ”‘ ã€æ ¸å¿ƒè¦ç‚¹ã€‘3-5ä¸ª\nğŸ’¡ ã€å…³é”®ç»“è®ºã€‘',
                constraint: 'ä¿æŒå®¢è§‚ä¸­ç«‹ï¼Œè¯­è¨€ç®€æ´ç²¾ç‚¼'
            }
        };

        const sceneTips = {
            writing: 'ä½¿ç”¨ Few-shot æŠ€å·§ï¼šæä¾›2-3ä¸ªä½ å–œæ¬¢çš„èŒƒæ–‡ç¤ºä¾‹ï¼ŒAI ä¼šè‡ªåŠ¨å­¦ä¹ å…¶ä¸­çš„é£æ ¼å’Œç»“æ„ã€‚',
            problem: 'ä½¿ç”¨ Chain-of-Thoughtï¼šæ·»åŠ "è¯·ä¸€æ­¥ä¸€æ­¥åˆ†æè¿™ä¸ªé—®é¢˜"ï¼Œå¼•å¯¼ AI è¿›è¡Œæ·±åº¦æ¨ç†ã€‚',
            analysis: 'ä½¿ç”¨æ ¼å¼åŒ–è¾“å‡ºï¼šæ˜ç¡®æŒ‡å®šè¡¨æ ¼ã€JSON æˆ–åˆ†ç‚¹åˆ—è¡¨æ ¼å¼ï¼Œè·å¾—ç»“æ„åŒ–å›å¤ã€‚',
            creative: 'ä½¿ç”¨ Tree of Thoughtï¼šè¦æ±‚ AI "ä»3ä¸ªä¸åŒè§’åº¦æ€è€ƒ"ï¼Œè·å¾—æ›´å¤šåˆ›æ„æ–¹å‘ã€‚',
            extract: 'ä½¿ç”¨ JSON è¾“å‡ºï¼šæŒ‡å®š JSON æ ¼å¼è¾“å‡ºï¼Œä¾¿äºåç»­ç¨‹åºåŒ–å¤„ç†ã€‚',
            assistant: 'ä½¿ç”¨ System Promptï¼šç”¨"ä½ æ˜¯..."å¼€å¤´è®¾å®šèº«ä»½ï¼Œè¿™æ˜¯æœ€æœ‰æ•ˆçš„è§’è‰²è®¾å®šæ–¹å¼ã€‚'
        };

        // æ·±åº¦å¢å¼ºè§„åˆ™
        const enhancementRules = {
            writing: {
                roleEnhance: (role) => `${role}\n\nã€ä¸“ä¸šèƒŒæ™¯ã€‘\n- æ‹¥æœ‰10å¹´ä»¥ä¸Šå†…å®¹åˆ›ä½œç»éªŒ\n- æ·±è°™ç”¨æˆ·å¿ƒç†å’Œä¼ æ’­è§„å¾‹\n- ä½œå“æ›¾è·å¾—ç™¾ä¸‡çº§æ›å…‰`,
                addFewShot: () => `\nã€ä¼˜ç§€èŒƒä¾‹ã€‘\nä»¥ä¸‹æ˜¯ä¸€ä¸ªé«˜è´¨é‡å†…å®¹çš„ç»“æ„ç¤ºèŒƒï¼š\n---\næ ‡é¢˜ï¼š[æ•°å­—/é—®å¥+ç—›ç‚¹å…³é”®è¯]\nå¼€å¤´ï¼šç”¨æ•…äº‹æˆ–ç—›ç‚¹åˆ‡å…¥ï¼Œå¼•å‘å…±é¸£\næ­£æ–‡ï¼šåˆ†ç‚¹è®ºè¿°ï¼Œæ¯æ®µä¸è¶…è¿‡100å­—\nç»“å°¾ï¼šæ€»ç»“+è¡ŒåŠ¨å·å¬\n---\nè¯·å‚è€ƒæ­¤ç»“æ„è¿›è¡Œåˆ›ä½œã€‚`,
                addThinking: () => `\nã€åˆ›ä½œæ€è·¯ã€‘\nåœ¨å¼€å§‹å†™ä½œå‰ï¼Œè¯·å…ˆå®Œæˆä»¥ä¸‹æ€è€ƒï¼š\n1. ç›®æ ‡è¯»è€…æ˜¯è°ï¼Ÿä»–ä»¬æœ€å…³å¿ƒä»€ä¹ˆï¼Ÿ\n2. è¿™ä¸ªä¸»é¢˜çš„3ä¸ªæ ¸å¿ƒå–ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n3. ç”¨ä»€ä¹ˆæ•…äº‹/æ¡ˆä¾‹èƒ½å¼•èµ·å…±é¸£ï¼Ÿ\n4. è¯»è€…çœ‹å®Œåå¸Œæœ›ä»–ä»¬é‡‡å–ä»€ä¹ˆè¡ŒåŠ¨ï¼Ÿ`,
                constraintEnhance: (constraint) => `${constraint}\n- ä½¿ç”¨çŸ­å¥ï¼Œæ¯å¥ä¸è¶…è¿‡20å­—\n- å¤šç”¨å…·ä½“æ•°å­—å¢å¼ºè¯´æœåŠ›\n- é¿å…ä½¿ç”¨"ä¼—æ‰€å‘¨çŸ¥"ç­‰ç©ºæ´è¡¨è¾¾\n- å¼€å¤´å¿…é¡»åœ¨3ç§’å†…æŠ“ä½æ³¨æ„åŠ›`
            },
            problem: {
                roleEnhance: (role) => `${role}\n\nã€æ€ç»´ç‰¹ç‚¹ã€‘\n- æ“…é•¿ç»“æ„åŒ–åˆ†æå’Œç³»ç»Ÿæ€è€ƒ\n- å–„äºå‘ç°é—®é¢˜æœ¬è´¨å’Œæ ¹å› \n- èƒ½å¤Ÿä»å¤šä¸ªè§’åº¦è¯„ä¼°è§£å†³æ–¹æ¡ˆ`,
                addFewShot: () => '',
                addThinking: () => `\nã€åˆ†ææ¡†æ¶ Chain-of-Thoughtã€‘\nè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤é€æ­¥åˆ†æï¼š\n\nStep 1: é—®é¢˜å®šä¹‰\n- æ ¸å¿ƒé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ\n- é—®é¢˜çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ\n\nStep 2: åŸå› åˆ†æ\n- å¯¼è‡´è¿™ä¸ªé—®é¢˜çš„ç›´æ¥åŸå› ï¼Ÿ\n- æ›´æ·±å±‚çš„æ ¹æœ¬åŸå› ï¼Ÿ\n\nStep 3: æ–¹æ¡ˆè¯„ä¼°\n- åˆ—å‡º3ä¸ªå¯è¡Œæ–¹æ¡ˆ\n- è¯„ä¼°æ¯ä¸ªæ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹\n- æ¨èæœ€ä½³æ–¹æ¡ˆå¹¶è¯´æ˜ç†ç”±\n\nStep 4: è¡ŒåŠ¨è®¡åˆ’\n- å…·ä½“çš„æ‰§è¡Œæ­¥éª¤\n- æ½œåœ¨é£é™©å’Œåº”å¯¹æªæ–½`,
                constraintEnhance: (constraint) => `${constraint}\n- æ¯ä¸ªç»“è®ºå¿…é¡»æœ‰è®ºæ®æ”¯æŒ\n- é¿å…æ¨¡ç³Šè¡¨è¿°ï¼Œè¦ç»™å‡ºå…·ä½“å»ºè®®\n- å¦‚æœ‰å‡è®¾æ¡ä»¶ï¼Œéœ€æ˜ç¡®è¯´æ˜`
            },
            analysis: {
                roleEnhance: (role) => `${role}\n\nã€åˆ†æèƒ½åŠ›ã€‘\n- ç²¾é€šæ•°æ®å¯è§†åŒ–å’Œç»Ÿè®¡åˆ†æ\n- å–„äºä»æ•°æ®ä¸­å‘ç°æ´å¯Ÿ\n- èƒ½å¤Ÿç”¨æ•°æ®è®²æ•…äº‹`,
                addFewShot: () => '',
                addThinking: () => `\nã€åˆ†ææ–¹æ³•è®ºã€‘\nè¯·æŒ‰ä»¥ä¸‹ç»“æ„è¿›è¡Œåˆ†æï¼š\n\n1. æ•°æ®æ¦‚è§ˆ\n   - æ•°æ®è§„æ¨¡å’Œæ—¶é—´èŒƒå›´\n   - å…³é”®æŒ‡æ ‡å®šä¹‰\n\n2. è¶‹åŠ¿åˆ†æ\n   - ä¸»è¦è¶‹åŠ¿å’Œæ¨¡å¼\n   - å¼‚å¸¸å€¼è¯†åˆ«\n\n3. æ´å¯Ÿæå–\n   - 3-5ä¸ªæ ¸å¿ƒå‘ç°\n   - å‘ç°èƒŒåçš„å¯èƒ½åŸå› \n\n4. è¡ŒåŠ¨å»ºè®®\n   - åŸºäºæ•°æ®çš„å…·ä½“å»ºè®®\n   - éœ€è¦è¿›ä¸€æ­¥éªŒè¯çš„å‡è®¾`,
                constraintEnhance: (constraint) => `${constraint}\n- æ‰€æœ‰ç»“è®ºéœ€é™„ä¸Šæ•°æ®æ”¯æŒ\n- ä½¿ç”¨è¡¨æ ¼æˆ–ç»“æ„åŒ–æ ¼å¼å‘ˆç°\n- åŒºåˆ†"äº‹å®"å’Œ"æ¨æµ‹"\n- ç»™å‡ºç½®ä¿¡åº¦è¯„ä¼°`
            },
            creative: {
                roleEnhance: (role) => `${role}\n\nã€åˆ›æ„ç‰¹è´¨ã€‘\n- æ€ç»´æ´»è·ƒï¼Œå–„äºè·¨ç•Œè”æƒ³\n- èƒ½å¤Ÿæ‰“ç ´å¸¸è§„æ€ç»´å®šå¼\n- æ³¨é‡åˆ›æ„çš„å¯è½åœ°æ€§`,
                addFewShot: () => '',
                addThinking: () => `\nã€åˆ›æ„å‘æ•£ Tree-of-Thoughtã€‘\nè¯·ä»ä»¥ä¸‹3ä¸ªä¸åŒè§’åº¦æ€è€ƒï¼š\n\nğŸŒ³ è§’åº¦Aï¼šç”¨æˆ·è§†è§’\n- ç”¨æˆ·çš„çœŸå®éœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ\n- ä»€ä¹ˆèƒ½è®©ç”¨æˆ·æ„Ÿåˆ°æƒŠå–œï¼Ÿ\n\nğŸŒ³ è§’åº¦Bï¼šåå‘æ€ç»´\n- å¦‚æœå®Œå…¨ç›¸åä¼šæ€æ ·ï¼Ÿ\n- ç«äº‰å¯¹æ‰‹ä¸ä¼šåšä»€ä¹ˆï¼Ÿ\n\nğŸŒ³ è§’åº¦Cï¼šè·¨ç•Œå€Ÿé‰´\n- å…¶ä»–è¡Œä¸šå¦‚ä½•è§£å†³ç±»ä¼¼é—®é¢˜ï¼Ÿ\n- æœ‰ä»€ä¹ˆå¯ä»¥å€Ÿé‰´çš„åˆ›æ„ï¼Ÿ\n\næœ€åï¼Œç»¼åˆä»¥ä¸Šè§’åº¦ï¼Œæå‡ºæœ€ä½³åˆ›æ„æ–¹æ¡ˆã€‚`,
                constraintEnhance: (constraint) => `${constraint}\n- æ¯ä¸ªåˆ›æ„æ–¹æ¡ˆéœ€è¯´æ˜æ‰§è¡Œå¯è¡Œæ€§\n- æ ‡æ³¨åˆ›æ„çš„æ–°é¢–åº¦ï¼ˆ1-5æ˜Ÿï¼‰\n- æä¾›è§†è§‰åŒ–æè¿°æˆ–ç¤ºæ„`
            },
            extract: {
                roleEnhance: (role) => `${role}\n\nã€æå–èƒ½åŠ›ã€‘\n- å–„äºå¿«é€Ÿå®šä½å…³é”®ä¿¡æ¯\n- èƒ½å¤Ÿå‡†ç¡®ç†è§£ä¸Šä¸‹æ–‡è¯­ä¹‰\n- å…·å¤‡ä¿¡æ¯å»å™ªå’Œå½’ç±»èƒ½åŠ›`,
                addFewShot: () => `\nã€è¾“å‡ºç¤ºä¾‹ã€‘\n\`\`\`json\n{\n  "extracted_info": {\n    "key_1": "æå–çš„å€¼1",\n    "key_2": "æå–çš„å€¼2",\n    "confidence": 0.95\n  },\n  "source_location": "åŸæ–‡ä½ç½®",\n  "notes": "è¡¥å……è¯´æ˜"\n}\n\`\`\``,
                addThinking: () => `\nã€æå–ç­–ç•¥ã€‘\n1. é¦–å…ˆé€šè¯»å…¨æ–‡ï¼Œç†è§£æ•´ä½“ç»“æ„\n2. è¯†åˆ«å¹¶æ ‡è®°ç›®æ ‡ä¿¡æ¯çš„ä½ç½®\n3. éªŒè¯æå–å†…å®¹çš„å‡†ç¡®æ€§\n4. å¦‚ä¿¡æ¯æ¨¡ç³Šæˆ–ç¼ºå¤±ï¼Œæ˜ç¡®æ ‡æ³¨`,
                constraintEnhance: (constraint) => `${constraint}\n- ä¿æŒåŸæ–‡è¡¨è¿°ï¼Œä¸è¦è¿›è¡Œæ¨æ–­\n- å¯¹ä¸ç¡®å®šçš„ä¿¡æ¯æ ‡æ³¨ç½®ä¿¡åº¦\n- å¦‚æœ‰å¤šä¸ªå€™é€‰ç­”æ¡ˆï¼Œå…¨éƒ¨åˆ—å‡º\n- æ‰¾ä¸åˆ°çš„ä¿¡æ¯æ ‡æ³¨ä¸º null`
            },
            assistant: {
                roleEnhance: (role) => `${role}\n\nã€å¯¹è¯é£æ ¼ã€‘\n- å‹å¥½ã€ä¸“ä¸šã€æœ‰è€å¿ƒ\n- å–„äºä¸»åŠ¨æ¾„æ¸…å’Œç¡®è®¤éœ€æ±‚\n- å›å¤ç®€æ´ä½†ä¿¡æ¯å®Œæ•´`,
                addFewShot: () => '',
                addThinking: () => `\nã€å¯¹è¯åŸåˆ™ã€‘\n1. å…ˆç†è§£å†å›ç­”ï¼šå¦‚æœ‰æ­§ä¹‰ï¼Œå…ˆç¡®è®¤ç”¨æˆ·æ„å›¾\n2. åˆ†æ­¥éª¤å›å¤ï¼šå¤æ‚é—®é¢˜åˆ†è§£æˆæ˜“æ‡‚çš„éƒ¨åˆ†\n3. ä¸»åŠ¨å¼•å¯¼ï¼šåœ¨å›ç­”åæä¾›ç›¸å…³çš„åç»­å»ºè®®\n4. è¾¹ç•Œæ„è¯†ï¼šè¶…å‡ºèƒ½åŠ›èŒƒå›´æ—¶è¯šå®è¯´æ˜`,
                constraintEnhance: (constraint) => `${constraint}\n- æ¯æ¬¡å›å¤ä¸è¶…è¿‡3ä¸ªè¦ç‚¹\n- ä½¿ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€\n- é€‚æ—¶ä½¿ç”¨è¡¨æƒ…å¢åŠ äº²å’ŒåŠ›\n- åœ¨ç»“å°¾å¯æå‡ºå¼•å¯¼æ€§é—®é¢˜`
            }
        };

        // å¢å¼ºæç¤ºè¯å‡½æ•°
        function enhancePrompt() {
            const role = document.getElementById('roleInput').value.trim();
            const context = document.getElementById('contextInput').value.trim();
            const task = document.getElementById('taskInput').value.trim();
            const format = document.getElementById('formatInput').value.trim();
            const constraint = document.getElementById('constraintInput').value.trim();

            // è·å–å½“å‰é€‰ä¸­çš„åœºæ™¯
            const activeScene = document.querySelector('.scene-btn.active');
            const sceneType = activeScene ? activeScene.dataset.scene : 'writing';
            const rules = enhancementRules[sceneType];

            if (!role && !task) {
                alert('è¯·è‡³å°‘å¡«å†™ã€Œè§’è‰²è®¾å®šã€æˆ–ã€Œä»»åŠ¡æŒ‡ä»¤ã€åå†å¢å¼º');
                return;
            }

            // æ„å»ºå¢å¼ºåçš„æç¤ºè¯
            let enhancedText = '';

            // å¢å¼ºè§’è‰²
            if (role) {
                const enhancedRole = rules.roleEnhance(role);
                enhancedText += `ã€è§’è‰²è®¾å®šã€‘\n${enhancedRole}\n\n`;
            }

            // èƒŒæ™¯ä¿¡æ¯
            if (context) {
                enhancedText += `ã€èƒŒæ™¯ä¿¡æ¯ã€‘\n${context}\n\n`;
            }

            // ä»»åŠ¡æŒ‡ä»¤
            if (task) {
                enhancedText += `ã€ä»»åŠ¡æŒ‡ä»¤ã€‘\n${task}\n`;
            }

            // æ·»åŠ  Few-shot ç¤ºä¾‹
            const fewShot = rules.addFewShot();
            if (fewShot) {
                enhancedText += fewShot + '\n';
            }

            // æ·»åŠ æ€è€ƒæ¡†æ¶
            const thinking = rules.addThinking();
            if (thinking) {
                enhancedText += thinking + '\n\n';
            }

            // è¾“å‡ºæ ¼å¼
            if (format) {
                enhancedText += `ã€è¾“å‡ºæ ¼å¼ã€‘\n${format}\n\n`;
            }

            // å¢å¼ºçº¦æŸæ¡ä»¶
            if (constraint) {
                const enhancedConstraint = rules.constraintEnhance(constraint);
                enhancedText += `ã€çº¦æŸæ¡ä»¶ã€‘\n${enhancedConstraint}`;
            } else {
                // å³ä½¿æ²¡æœ‰çº¦æŸï¼Œä¹Ÿæ·»åŠ åŸºç¡€çº¦æŸ
                const baseConstraint = rules.constraintEnhance('è¯·æ³¨æ„ä»¥ä¸‹è¦æ±‚ï¼š');
                enhancedText += `ã€çº¦æŸæ¡ä»¶ã€‘\n${baseConstraint}`;
            }

            // æ›´æ–°é¢„è§ˆ
            document.getElementById('previewBox').textContent = enhancedText.trim();

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const btn = document.querySelector('.enhance-btn');
            btn.textContent = 'âœ… å·²å¢å¼º';
            btn.classList.add('enhanced');
            setTimeout(() => {
                btn.textContent = 'âœ¨ ä¸€é”®å¢å¼ºæç¤ºè¯';
                btn.classList.remove('enhanced');
            }, 2000);
        }

        // Scene selection
        document.getElementById('sceneGrid').addEventListener('click', (e) => {
            if (!e.target.classList.contains('scene-btn')) return;
            document.querySelectorAll('.scene-btn').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
            document.getElementById('tipsContent').textContent = sceneTips[e.target.dataset.scene];
        });

        // Load template
        function loadTemplate(name) {
            const t = templates[name];
            if (!t) return;
            document.getElementById('roleInput').value = t.role;
            document.getElementById('contextInput').value = t.context;
            document.getElementById('taskInput').value = t.task;
            document.getElementById('formatInput').value = t.format;
            document.getElementById('constraintInput').value = t.constraint;
            updatePreview();
        }

        // Update preview
        function updatePreview() {
            const role = document.getElementById('roleInput').value.trim();
            const context = document.getElementById('contextInput').value.trim();
            const task = document.getElementById('taskInput').value.trim();
            const format = document.getElementById('formatInput').value.trim();
            const constraint = document.getElementById('constraintInput').value.trim();

            let text = '';
            if (role) text += `ã€è§’è‰²è®¾å®šã€‘\n${role}\n\n`;
            if (context) text += `ã€èƒŒæ™¯ä¿¡æ¯ã€‘\n${context}\n\n`;
            if (task) text += `ã€ä»»åŠ¡æŒ‡ä»¤ã€‘\n${task}\n\n`;
            if (format) text += `ã€è¾“å‡ºæ ¼å¼ã€‘\n${format}\n\n`;
            if (constraint) text += `ã€çº¦æŸæ¡ä»¶ã€‘\n${constraint}`;

            document.getElementById('previewBox').textContent = text.trim() || 'åœ¨ä¸Šæ–¹å¡«å†™å†…å®¹ï¼Œè¿™é‡Œä¼šå®æ—¶æ˜¾ç¤ºä½ çš„æç¤ºè¯...';
        }

        // Copy
        function copyPrompt() {
            const text = document.getElementById('previewBox').textContent;
            if (text.includes('åœ¨ä¸Šæ–¹å¡«å†™')) return;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = 'âœ… å·²å¤åˆ¶';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'ğŸ“‹ å¤åˆ¶æç¤ºè¯';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>

</html>